# 项目开发日志

>V2.0版本:

项目架构:

- express提供web服务
- bluebird提供Promise
- seuqelize执行sql原始查询
- 根据请求生成调用logic生成文字结果对象

## 项目日记

2017-04-12:

- 新增库存日报表小数位数参数；
- 暂时将“磷矿石”加入化肥类的“其它”中，因为报表需求累计数；
- 修改销售日报表年累计数的小数位数；
- 修改打印格式；

2017-04-11:

- 修复富钙和磷酸分类错误问题;
- 修复销售日报中同期比算法错误问题;
- 修复route.params路由问题;

2017-04-08:

- 现在已经把打印功能彻底从逻辑中分离出来
- github提交老是出问题？解决了，先`git pull`，然后在`git push -f`，将本地的将行覆盖远程分支上。

2017-04-06：

- coding上的repo终于同步到github上了，用到了一个命令：`git pull origin master --allow-unrelated-histories`
- 新建了utils模块名，将公用的静态方法全部从logic中提取出来，方便以后复用
- 加入了winston的express中间件，方便以后在pm2上线时记录错误

2017-04-05:

- 目前日报表库存部分已经重构完毕。之前的算法是算法函数直接把所有结果生成对象传递给打印模板直接打印，但问题是查询arr原始数据次数过多，会造成一定性能损失，故决定在重构采购和销售日报表算法时，解决这个问题。打印模板做一些适当的逻辑操作，以增加性能；
- 写到打印模板时，发现还得写一个统计结果类才行嘛。在logic统计出的对象结果直接解构赋值给这个对象！管他的，先在打印模板中把这个类写出来再新建文件。